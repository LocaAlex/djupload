{% extends "upload/base.html" %}

{% block title %}Signup{% endblock %}

{% block content %}
<section class="section">
    <div class="container">
        <h1 class="title">Signup</h1>
        {% if messages %}
            <div class="notification is-danger">
                {% for message in messages %}
                    <p>{{ message }}</p>
                {% endfor %}
            </div>
        {% endif %}
        <form method="POST" class="box" onsubmit="return validatePassword()">
            {% csrf_token %}
            <div class="field">
                {{ form.username.label_tag }}
                <div class="control">
                    {{ form.username }}
                </div>
            </div>
            <div class="field">
                {{ form.password1.label_tag }}
                <div class="control">
                    {{ form.password1 }}
                </div>
            </div>
            <div class="field">
                {{ form.password2.label_tag }}
                <div class="control">
                    {{ form.password2 }}
                </div>
                <p id="password2-help" class="help is-danger" style="display: none;">Passwords do not match.</p>
            </div>
            <div class="field">
                <div class="control">
                    <button type="submit" class="button is-primary">Signup</button>
                </div>
            </div>
            <div class="field">
                <p class="help">
                    <a href="{% url 'upload:login' %}">Already have an account?</a>
                </p>
            </div>
        </form>
    </div>
</section>

<script>
function validatePassword() {
    var password1 = document.getElementById("id_password1").value;
    var password2 = document.getElementById("id_password2").value;
    var password2Field = document.getElementById("id_password2");
    var password2Help = document.getElementById("password2-help");

    if (password1 !== password2) {
        password2Help.style.display = "block";
        return false;
    } else {
        password2Help.style.display = "none";
        return true;
    }
}
</script>
{% endblock content %}
